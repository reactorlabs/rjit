box: reactorl/llvm
no-response-timeout: 10
command-timeout: 120
build:
  steps:
    - script:
        name: setup (without llvm) and run tests
        code: |
            ${WERCKER_SOURCE_DIR}/tools/setup.sh -h
  after-steps:
    - script:
        name: determine slack user name
        code: |
            source ${WERCKER_SOURCE_DIR}/tools/wercker.sh && echo $SLACK_USER
    - wantedly/pretty-slack-notify:
        webhook_url: https://hooks.slack.com/services/T084REP36/B0B99DJ6B/$SLACK_TOKEN
        channel: r-on-llvm
        username: cibot
        branches: ^master$
    - wantedly/pretty-slack-notify:
        webhook_url: https://hooks.slack.com/services/T084REP36/B0B99DJ6B/$SLACK_TOKEN
        channel: "@$SLACK_USER"
        username: cibot
