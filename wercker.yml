box: reactorl/llvm
no-response-timeout: 10
command-timeout: 120
build:
  steps:
    - script:
        name: setup (without llvm) and run tests
        code: |
            ${WERCKER_SOURCE_DIR}/tools/setup.sh -l -d . 
  after-steps:
    - script:
        name: determine slack user name
        code: |
            source ${WERCKER_SOURCE_DIR}/tools/wercker.sh
    - sherzberg/slack-notify:
        subdomain: just-r
        token: $SLACK_TOKEN
        channel: "@$SLACK_USER"
        username: cibot
        icon_url: https://avatars3.githubusercontent.com/u/1695193?s=140
    - wantedly/pretty-slack-notify:
        webhook_url: $SLACK_TOKEN
        channel: r-on-llvm
        username: cibot
        branches: ^master$
